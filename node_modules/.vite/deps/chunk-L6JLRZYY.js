import {
  writeEffect
} from "./chunk-TGF4NKIJ.js";
import {
  animationSetup
} from "./chunk-SJDQO3DF.js";

// node_modules/svelte-typewriter/helpers/getLongestTextElement.js
var descendingSortFunction = (firstElement, secondElement) => secondElement.text.length - firstElement.text.length;
var getLongestTextElement = (elements) => {
  const descendingTextLengthOrder = elements.sort(descendingSortFunction);
  const longestTextElement = descendingTextLengthOrder[0].currentNode;
  return longestTextElement;
};

// node_modules/svelte-typewriter/helpers/onAnimationEnd.js
var onAnimationEnd = (element, callback) => {
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      const elementAttributeChanged = mutation.type === "attributes";
      const elementFinishedTyping = mutation.target.classList.contains("finished-typing");
      if (elementAttributeChanged && elementFinishedTyping)
        callback();
    });
  });
  observer.observe(element, {
    attributes: true,
    childList: true,
    subtree: true
  });
};

// node_modules/svelte-typewriter/modes/concurrent.js
var concurrent = (node, props) => {
  const { options, elements } = animationSetup(node, props);
  const lastElementToFinish = getLongestTextElement(elements);
  onAnimationEnd(lastElementToFinish, () => options.dispatch("done"));
  for (const element of elements) {
    writeEffect(element, options).then(() => {
      if (options.keepCursorOnFinish) {
        const isNotLongestElement = element.currentNode !== lastElementToFinish;
        isNotLongestElement && element.currentNode.classList.replace("typing", "finished-typing");
      } else {
        element.currentNode.classList.replace("typing", "finished-typing");
      }
      const cursorHasTimeout = typeof options.keepCursorOnFinish === "number";
      cursorHasTimeout && setTimeout(() => {
        element.currentNode.classList.replace("typing", "finished-typing");
      }, options.keepCursorOnFinish);
    });
  }
};
var concurrent_default = concurrent;

export {
  concurrent_default
};
//# sourceMappingURL=chunk-L6JLRZYY.js.map
